(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const s of e.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function o(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function c(t){if(t.ep)return;t.ep=!0;const e=o(t);fetch(t.href,e)}})();function i(r,n="success"){const o=document.createElement("div"),c="fixed top-5 right-[-320px] z-50 min-w-[280px] px-4 py-3 rounded-md text-neutral-200 border border-neutral-600 transition-all duration-500 flex items-center justify-between gap-3 bg-neutral-900",t=n==="success"?"border-green-500":"border-red-500";o.className=`${c} ${t}`;const e=document.createElement("span");e.textContent=r;const s=document.createElement("button");s.innerHTML="âœ•",s.className="text-neutral-400 hover:text-white transition text-sm font-bold  cursor-pointer",o.appendChild(e),o.appendChild(s),document.body.appendChild(o),setTimeout(()=>{o.classList.remove("right-[-320px]"),o.classList.add("right-5")},10);const f=setTimeout(()=>d(),3e3);function d(){clearTimeout(f),o.classList.remove("right-5"),o.classList.add("right-[-320px]"),setTimeout(()=>o.remove(),500)}s.addEventListener("click",d)}const p=document.getElementById("app"),b=p.querySelector("#youtube-url"),a=p.querySelector("#convert-button"),h="/download_audio?url=";let l=null,u=!1;function w(){a.innerHTML="";const r=document.createElement("img");r.src="./loader.svg",r.className="w-6 h-6 animate-spin",r.style.animationDuration="1.3s",a.appendChild(r);const n=document.createElement("span");n.textContent="Cancel",n.className="ml-2",a.appendChild(n)}function m(){a.textContent="convert",u=!1}a.addEventListener("click",async r=>{if(r.preventDefault(),u&&l){l.abort(),i("Download cancelled","info"),m(),l=null;return}const n=b.value||"https://www.youtube.com/watch?v=dQw4w9WgXcQ";if(!n.startsWith("https://www.youtube.com/")&&!n.startsWith("www.youtube.com/")){i("Invalid YouTube URL format","error");return}l=new AbortController,u=!0,w();try{const c=await(await fetch(h+n,{signal:l.signal})).blob(),t=window.URL.createObjectURL(c),e=document.createElement("a");e.href=t,e.download="audio.webm",document.body.appendChild(e),e.click(),e.remove(),i("Download completed successfully","success")}catch(o){o.name!=="AbortError"&&(console.error(o),i("Download failed","error"))}finally{l=null,m()}});
